{"version":3,"sources":["../../../src/api/controller/home.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;;;;;;;;;AAGI;;;;;oBAKO,W;;;;;;;;AAEC,8B,GAAY,C,EAAG;AACrB;;;4BACqB,KAAK,KAAL,CAAW,cAAX,EAA2B,UAA3B,E;;;AAAjB,6B;;4BAGe,KAAK,KAAL,CAAW,YAAX,EAAyB,YAAzB,E;;;AAAf,2B;;4BAGmB,KAAK,KAAL,CAAW,SAAX,EAAsB,UAAtB,CAAiC,CAAjC,C;;;AAAjB,6B;iCAGW,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAL,sB;;AACT,uBAAE,SAAF,EAAa,GAAb,CAAiB,UAAC,EAAD,EAAM;AAAC,2BAAG,MAAH,IAAa,GAAG,UAAH,CAAb,EAA4B,OAAO,GAAG,UAAH,CAAnC;AAAkD,sBAA1E;;;;;;;kCAEY,M;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAL,sB;;AACP,uBAAE,MAAF,EAAU,GAAV,CAAc,UAAC,CAAD,EAAK;AAAC,0BAAE,OAAF,IAAW,EAAE,cAAF,CAAX,EAA6B,OAAO,EAAE,cAAF,CAApC;AAAsD,sBAA1E;AACG,uBAAE,OAAF,IAAa,EAAE,MAAF,CAAb,CAAwB,OAAO,EAAE,MAAF,CAAP;AACxB,uBAAE,UAAF,IAAgB,EAAE,MAAF,CAAhB,CAA2B,OAAO,EAAE,MAAF,CAAP;;;;;;;AAE7B,2B,GAAQ;AACX,mCAAU;AACT,mCAAO,CAAC,SAAS,CAAT,EAAY,MAAZ,CAAD,CADE;AAET,sCAAU,CAAC,SAAS,CAAT,EAAY,SAAZ,EAAuB,KAAvB,CAA6B,CAA7B,EAA+B,CAA/B,CAAD;AAFD,yBADC;AAKX,oCAAW;AACV,mCAAO,CAAC,SAAS,CAAT,EAAY,MAAZ,CAAD,EAAqB,SAAS,CAAT,EAAY,MAAZ,CAArB,EAAyC,SAAS,CAAT,EAAY,MAAZ,CAAzC,CADG;AAEV,sCAAU,CAAC,SAAS,CAAT,EAAY,SAAZ,EAAuB,KAAvB,CAA6B,CAA7B,EAA+B,CAA/B,CAAD,EACE,SAAS,CAAT,EAAY,SAAZ,EAAuB,KAAvB,CAA6B,CAA7B,EAA+B,CAA/B,CADF,EAEE,SAAS,CAAT,EAAY,SAAZ,EAAuB,KAAvB,CAA6B,CAA7B,EAA+B,CAA/B,CAFF;AAFA,yBALA;AAWX,yCAAgB,MAXL;AAYX,mCAAU;AAZC,sB;;2BAcP,UAAQ,I;;;;;sDACH,KAAK,OAAL,CAAa,MAAb,C;;;sDAEA,KAAK,IAAL,CAAU,QAAV,C","file":"home.js","sourcesContent":["'use strict';\n\nimport Base from './base.js';\n\nexport default class extends Base {\n    /**\n     * index action\n     * @return {Promise} []\n     */\n\n     async indexAction(){\n\n        let detailNum = 6; //文章数量\n     \t// get article on home page\n     \tlet articles = await this.model('article_type').getArticle();\n\n     \t//get item groups on home page\n     \tlet groups = await this.model('item_group').getGroupItem();\n\n     \t//get services on home page\n        let services = await this.model('service').selectData(4);\n\n        //format data\n        for (let  a of articles){\n        \ta[\"article\"].map((aa)=>{aa[\"date\"] = aa[\"createAt\"],delete aa[\"createAt\"]});\n        }\n        for(let g of groups){\n        \tg[\"item\"].map((i)=>{i[\"price\"]=i[\"currentPrice\"],delete i[\"currentPrice\"]});\n            g[\"title\"] = g[\"name\"]; delete g[\"name\"];\n            g[\"auctions\"] = g[\"item\"]; delete g[\"item\"];\n        }\n     \tlet result ={\n     \t\t\"lefttab\":{\n     \t\t\t\"tabs\":[articles[0][\"name\"]],\n     \t\t\t\"details\":[articles[0][\"article\"].slice(0,6)]\n     \t\t},\n     \t\t\"righttab\":{\n     \t\t\t\"tabs\":[articles[1][\"name\"],articles[2][\"name\"],articles[3][\"name\"]],\n     \t\t\t\"details\":[articles[1][\"article\"].slice(0,6), \n                    articles[2][\"article\"].slice(0,6), \n                    articles[3][\"article\"].slice(0,6)] \t\t\t\n     \t\t},\n     \t\t\"auctionGroups\":groups,\n     \t\t\"service\":services\n     \t}\n        if(result!=null)\n        \treturn this.success(result);\n        else\n        \treturn this.fail(\"无相关数据！\");\n     }\n}"]}