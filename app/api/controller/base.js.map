{"version":3,"sources":["../../../src/api/controller/base.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;IAEqB,I;;;;;;;;AACnB;;;iBAGA,I,mBAAc;AAAA;;AAAA,sCAAN,IAAM;AAAN,UAAM;AAAA;;AACZ,8DAAM,IAAN,mDAAc,IAAd;AACD,G;;iBAEK,Q;;;;;;;AACA,oB,GAAS,KAAK,IAAL,CAAU,MAAV,CAAiB,WAAjB,E;;AACb,mBAAK,cAAL;;oBACI,WAAW,S;;;;;+CACN,KAAK,GAAL,E;;;;;;;;;;;;;;;;;iBAIX,c,6BAAiB;AACf,SAAK,MAAL,CAAY,6BAAZ,EAA2C,KAAK,MAAL,CAAY,QAAZ,KAAyB,GAApE;AACA,SAAK,MAAL,CAAY,8BAAZ,EAA4C,kIAA5C;AACA,SAAK,MAAL,CAAY,+BAAZ,EAA6C,qBAA7C;AACA,SAAK,MAAL,CAAY,kCAAZ,EAAgD,MAAhD;AACD,G;;;EArB+B,MAAM,UAAN,CAAiB,I;;kBAA9B,I","file":"base.js","sourcesContent":["'use strict';\n\nexport default class Base extends think.controller.base {\n  /**\n   * some base method in here\n   */\n  init(...args) {\n    super.init(...args);\n  }\n\n  async __before() {\n    let method = this.http.method.toLowerCase();\n    this._setCorsHeader();\n    if (method === \"options\") {\n      return this.end();\n    }\n  }\n\n  _setCorsHeader() {\n    this.header(\"Access-Control-Allow-Origin\", this.header(\"origin\") || \"*\");\n    this.header(\"Access-Control-Allow-Headers\", \"Origin, No-Cache, X-Requested-With, If-Modified-Since, Pragma, Last-Modified, Cache-Control, Expires, Content-Type, Set-Cookie,*\");\n    this.header(\"Access-Control-Request-Method\", \"GET,POST,PUT,DELETE\");\n    this.header(\"Access-Control-Allow-Credentials\", \"true\");\n  }\n}"]}