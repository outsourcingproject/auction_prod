{"version":3,"sources":["../../../src/api/controller/base.js"],"names":["Base","init","args","__before","method","http","toLowerCase","_setCorsHeader","end","header","think","controller","base"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;IAEqBA,I;;;;;;;;AACnB;;;iBAGAC,I,mBAAc;AAAA;;AAAA,sCAANC,IAAM;AAANA,UAAM;AAAA;;AACZ,8DAAMD,IAAN,mDAAcC,IAAd;AACD,G;;iBAEKC,Q;;;;;;;AACAC,oB,GAAS,KAAKC,IAAL,CAAUD,MAAV,CAAiBE,WAAjB,E;;AACb,mBAAKC,cAAL;;oBACIH,WAAW,S;;;;;+CACN,KAAKI,GAAL,E;;;;;;;;;;;;;;;;;iBAIXD,c,6BAAiB;AACf,SAAKE,MAAL,CAAY,6BAAZ,EAA2C,KAAKA,MAAL,CAAY,QAAZ,KAAyB,GAApE;AACA,SAAKA,MAAL,CAAY,8BAAZ,EAA4C,kIAA5C;AACA,SAAKA,MAAL,CAAY,+BAAZ,EAA6C,qBAA7C;AACA,SAAKA,MAAL,CAAY,kCAAZ,EAAgD,MAAhD;AACD,G;;;EArB+BC,MAAMC,UAAN,CAAiBC,I;;kBAA9BZ,I","file":"base.js","sourcesContent":["'use strict';\r\n\r\nexport default class Base extends think.controller.base {\r\n  /**\r\n   * some base method in here\r\n   */\r\n  init(...args) {\r\n    super.init(...args);\r\n  }\r\n\r\n  async __before() {\r\n    let method = this.http.method.toLowerCase();\r\n    this._setCorsHeader();\r\n    if (method === \"options\") {\r\n      return this.end();\r\n    }\r\n  }\r\n\r\n  _setCorsHeader() {\r\n    this.header(\"Access-Control-Allow-Origin\", this.header(\"origin\") || \"*\");\r\n    this.header(\"Access-Control-Allow-Headers\", \"Origin, No-Cache, X-Requested-With, If-Modified-Since, Pragma, Last-Modified, Cache-Control, Expires, Content-Type, Set-Cookie,*\");\r\n    this.header(\"Access-Control-Request-Method\", \"GET,POST,PUT,DELETE\");\r\n    this.header(\"Access-Control-Allow-Credentials\", \"true\");\r\n  }\r\n}"]}