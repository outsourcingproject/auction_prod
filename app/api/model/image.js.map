{"version":3,"sources":["../../../src/api/model/image.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAI,MAAM,QAAQ,QAAR,CAAV;AACA;;;;;;;;;;;;mBAKQ,S;2FAAU,O;;;;;;;AACV,oB;;AACJ,kBAAI,EAAE,mBAAmB,KAArB,CAAJ,EACE,UAAU,CAAC,OAAD,CAAV;;qBACa,KAAK,KAAL,CAAW,EAAC,IAAI,CAAC,IAAD,EAAO,OAAP,CAAL,EAAX,EAAkC,MAAlC,E;;;AAAf,oB;0BACc,M;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAL,e;;AACP,gBAAE,UAAF,IAAgB,KAAK,aAAL,CAAmB,EAAE,MAAF,CAAnB,CAAhB;;;;;;;+CAEK,M;;;;;;;;;;;;;;;;;mBAGT,a,0BAAc,O,EAAS;AACrB,QAAI,MAAM,IAAI,KAAJ,CAAU,OAAV,CAAV;AACA,QAAI,IAAI,QAAJ,EAAc,WAAd,MAA+B,MAAnC,EAA2C;AACzC,UAAI,IAAI,MAAJ,EAAY,WAAZ,MAA6B,aAAjC,EAAgD;AAC9C,eAAO,eAAK,IAAL,CAAU,MAAM,WAAhB,EAA6B,IAAI,MAAJ,CAA7B,CAAP;AACD;AACF;AACD,WAAO,GAAP;AACD,G","file":"image.js","sourcesContent":["import Base from './base.js'\nimport path from 'path';\n\nvar URI = require(\"uri-js\");\n/**\n * model\n */\nexport default class extends Base {\n\n  async getImages(imageId) {\n    let images;\n    if (!(imageId instanceof Array))\n      imageId = [imageId];\n    images = await this.where({id: [\"IN\", imageId]}).select();\n    for (let i of images) {\n      i[\"realPath\"] = this.translatePath(i[\"path\"]);\n    }\n    return images;\n  }\n\n  translatePath(oldPath) {\n    let res = URI.parse(oldPath);\n    if (res[\"scheme\"].toLowerCase() == \"file\") {\n      if (res[\"host\"].toLowerCase() == \"upload_path\") {\n        return path.join(think.UPLOAD_PATH, res[\"path\"]);\n      }\n    }\n    return res;\n  }\n\n}"]}