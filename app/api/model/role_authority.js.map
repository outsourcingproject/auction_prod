{"version":3,"sources":["../../../src/api/model/role_authority.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;IAEqB,a;;;;;;;;AACrB;;;;;;0BAMQ,kB;2FAAmB,Q;wCAAa,W;AAAA,mB;;;;;;;;;AAEhC,4B,GAAe,MAAM,KAAN,CAAY,WAAZ,EAAwB,IAAxB,EAA6B,KAA7B,C;AACf,uB,GAAU,MAAM,KAAN,CAAY,MAAZ,EAAmB,IAAnB,EAAwB,KAAxB,C;;qBAEG,UAAU,KAAV,CAAgB,EAAC,MAAK,QAAN,EAAhB,EAAiC,IAAjC,E;;;AAAb,kB;;mBAED,MAAM,OAAN,CAAc,IAAd,C;;;;;;;;0BAIY,W;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAN,gB;;qBACe,eAAe,KAAf,CAAqB,EAAC,MAAK,EAAN,EAArB,EAAgC,IAAhC,E;;;AAAlB,uB;;mBACD,MAAM,OAAN,CAAc,SAAd,C;;;;;;;;;qBAGG,KAAK,OAAL,CAAa,EAAC,MAAK,KAAK,EAAX,EAAc,WAAU,UAAU,EAAlC,EAAb,EAAmD,EAAC,MAAK,KAAK,EAAX,EAAc,WAAU,UAAU,EAAlC,EAAnD,C;;;;;;;;;;;;;;;;;;;;;;;;kBAvBS,a","file":"role_authority.js","sourcesContent":["import Base from './base'\r\n\r\nexport default class RoleAuthority extends Base {\r\n/**\r\n   *\r\n   * @param roleName {String} name of role\r\n   * @param authorities {ObjectID} authorities' name\r\n   * @returns {Promise}\r\n   */\r\n  async addRoleAuthorities(roleName, ...authorities) {\r\n    \r\n    let authorityModel=think.model('authority',null,'api');\r\n    let roleModel=think.model('role',null,'api');\r\n\r\n    let role = await roleModel.where({name:roleName}).find();\r\n\r\n    if(think.isEmpty(role)){\r\n    \treturn ;\r\n    }\r\n\r\n    for (let an of authorities) {\r\n      let authority = await authorityModel.where({name:an}).find();\r\n      if(think.isEmpty(authority)){\r\n      \tcontinue;\r\n      }\r\n      await this.thenAdd({role:role.id,authority:authority.id},{role:role.id,authority:authority.id})\r\n    }\r\n  }\r\n\r\n}"]}