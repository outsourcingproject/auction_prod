{"version":3,"sources":["../../../src/api/model/article_type.js"],"names":["init","args","relation","article","type","think","model","HAS_MANY","key","fKey","getList","setRelation","select","selectData","id","toString","where","order","find","getArticle","articles","typeList","t","a","push"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;AACA;;;;;;AACA;;;;;;;;;;;AAIE;;;;;mBAKAA,I,mBAAa;AAAA;;AAAA,sCAALC,IAAK;AAALA,UAAK;AAAA;;AACX,4CAAMD,IAAN,iDAAcC,IAAd;;AAEA,SAAKC,QAAL,GAAgB;AACdC,eAAQ;AACNC,cAAMC,MAAMC,KAAN,CAAYC,QADZ;AAENC,aAAI,IAFE;AAGNC,cAAK;;AAEL;AALM;AADM,KAAhB;AASD,G;;mBACCC,O,sBAAS;AACP,WAAO,KAAKC,WAAL,CAAiB,KAAjB,EAAwBC,MAAxB,EAAP;AACD,G;;AAED;;;mBACAC,U,uBAAWC,E,EAAG;AACZA,OAAGC,QAAH;AACA,WAAO,KAAKJ,WAAL,CAAiB,IAAjB,EACJK,KADI,CACE,UAAQF,EADV,EAEJG,KAFI,CAEE,eAFF,EAGJC,IAHI,EAAP;AAID,G;;AAED;;;mBACMC,U;;;;;;;AACAC,sB,GAAW,E;;qBACM,KAAKV,OAAL,E;;;AAAjBW,sB;uDACSA,Q;;;;;;;;AAALC,e;;qBACQ,KAAKT,UAAL,CAAgBQ,SAASC,CAAT,EAAY,IAAZ,CAAhB,C;;;AAAVC,e;;AACJH,uBAASI,IAAT,CAAcD,CAAd;;;;;+CAEKH,Q","file":"article_type.js","sourcesContent":["'use strict';\r\nimport Base from './base.js'\r\n/**\r\n * relation model\r\n */\r\nexport default class extends Base {\r\n  /**\r\n   * init\r\n   * @param  {} args []\r\n   * @return {}         []\r\n   */\r\n  init(...args){\r\n    super.init(...args);\r\n\r\n    this.relation = {\r\n      article:{\r\n        type: think.model.HAS_MANY,\r\n        key:\"id\",\r\n        fKey:\"type\"\r\n       \r\n        // field:\"id,title\"\r\n      }\r\n    }\r\n  }\r\n    getList(){\r\n      return this.setRelation(false).select();\r\n    }    \r\n\r\n    //根据文章类别id 读取文章\r\n    selectData(id){\r\n      id.toString();\r\n      return this.setRelation(true)\r\n        .where(\"id = \"+id)\r\n        .order(\"createAt DESC\")\r\n        .find();\r\n    }\r\n\r\n    //查询文章类别和文章详情页\r\n    async getArticle(){\r\n      let articles = [];\r\n      let typeList = await this.getList();\r\n      for(var t in typeList){\r\n        let a = await this.selectData(typeList[t][\"id\"]);\r\n        articles.push(a);\r\n      }\r\n      return articles;\r\n    }\r\n  }\r\n"]}