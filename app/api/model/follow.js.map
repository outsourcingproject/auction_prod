{"version":3,"sources":["../../../src/api/model/follow.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;AAGA;;;;;;;;;;;kBAIO,Y;yFAAa,M,EAAQ,M;;;;;;;cACZ,KAAK,KAAL,CAAW,EAAC,MAAK,MAAN,EAAc,MAAK,MAAnB,EAAX,EAAuC,MAAvC,E;;;AAAV,Q;;YACD,MAAM,OAAN,CAAc,CAAd,C;;;;;wCACK,KAAK,GAAL,CAAS,EAAC,MAAK,MAAN,EAAc,MAAK,MAAnB,EAAT,C;;;wCAEA,KAAK,MAAL,CAAY,EAAC,MAAK,MAAN,EAAc,MAAK,MAAnB,EAAZ,C;;;;;;;;;;;;;;;;;kBAGH,W;2FAAY,M,EAAO,M;;;;;sBACjB,K;;cAAoB,KAAK,KAAL,CAAW,QAAX,EAAqB,KAArB,CAA2B,EAAC,QAAO,MAAR,EAAe,QAAO,MAAtB,EAA3B,EAA0D,MAA1D,E;;;;;yBAAd,O;;;;;sBAAmF,K;;;;;sBAAM,I;;;;;;;;;;;;;;;;;;;;kBAGjG,Y;2FAAa,M;;;;;yCACX,KAAK,IAAL,CAAU,gCAAV,EACJ,KADI,CACE,sFADF,EAEJ,KAFI,CAEE,EAAC,MAAK,MAAN,EAFF,EAEiB,MAFjB,E","file":"follow.js","sourcesContent":["import Base from './base.js'\r\n\r\n\r\n/**\r\n * model\r\n */\r\nexport default class extends Base {\r\n\tasync followToggle(userId, itemId){\r\n\t\tlet f = await this.where({user:userId, item:itemId}).select();\r\n\t\tif(think.isEmpty(f))\r\n\t\t\treturn this.add({user:userId, item:itemId});\r\n\t\telse \r\n\t\t\treturn this.delete({user:userId, item:itemId});\r\n\t}\r\n\r\n\tasync isFollowing(userId,itemId){\r\n\t\treturn think.isEmpty(await this.model(\"follow\").where({\"item\":itemId,\"user\":userId}).select())? false:true;\r\n\t}\r\n\r\n\tasync getFollowing(userId){\r\n\t\treturn this.join(\"item on follow.item = item.id \")\r\n\t\t\t\t.field(\"item.id as id, item.name as name, item.status as status, follow.createAt as createAt\")\r\n\t\t\t\t.where({user:userId}).select();\r\n\t}\r\n}"]}