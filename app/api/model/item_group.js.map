{"version":3,"sources":["../../../src/api/model/item_group.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;IAEqB,S;;;;;;;;sBACnB,I,mBAAa;AAAA;;AAAA,sCAAL,IAAK;AAAL,UAAK;AAAA;;AACX,4CAAM,IAAN,iDAAc,IAAd;AACA,SAAK,QAAL,GAAgB;AACd,YAAM;AACJ,cAAM,MAAM,KAAN,CAAY,QADd;AAEJ,aAAI,IAFA;AAGJ,cAAK,OAHD;AAIJ,eAAO,eAJH;AAKJ,eAAM,CAAC,EAAD,CALF;AAMJ,kBAAU;AANN;AADQ,KAAhB;AAUD,G;;sBAED,U,uBAAW,E,EACX;AACI,WAAO,KAAK,WAAL,CAAiB,IAAjB,EAAuB,KAAvB,CAA6B,UAAQ,EAArC,EAAyC,IAAzC,EAAP;AACH,G;;AAED;;;sBACA,O,sBAAS;AACP,WAAO,KAAK,WAAL,CAAiB,KAAjB,EAAwB,KAAxB,CAA8B,EAAC,QAAO,CAAR,EAA9B,EAA0C,KAA1C,CAAgD,eAAhD,EAAiE,MAAjE,EAAP;AACD,G;AACD;;;sBACM,Y;;;;;;;AACA,oB,GAAS,E;;qBACS,KAAK,OAAL,E;;;AAAlB,uB;uDACU,S;;;;;;;;AAAL,e;;qBACQ,KAAK,UAAL,CAAgB,UAAU,CAAV,EAAa,IAAb,CAAhB,C;;;AAAX,e;;AACJ,qBAAO,IAAP,CAAY,CAAZ;;;;;+CAEK,M;;;;;;;;;;;;;;;;;AAGT;;;sBACA,Y,2BAAc;AACZ,WAAO,KAAK,WAAL,CAAiB,KAAjB,EAAwB,KAAxB,CAA8B,eAA9B,EAA+C,MAA/C,EAAP;AACD,G;;sBAEK,S;6FAAU,I;;;;;;AACd,qBAAO,gBAAM,SAAN,YAAgB,IAAhB,CAAP;;qBACmB,KAAK,MAAL,E;;;AAAf,oB;;AACJ,mBAAK,EAAL,GAAU,OAAO,MAAP,CAAc,UAAC,GAAD,EAAM,IAAN;AAAA,uBAAa,MAAM,CAAC,KAAK,EAAZ,GAAiB,GAAjB,GAAuB,CAAC,KAAK,EAAN,IAAY,GAAhD;AAAA,eAAd,EAAmE,CAAnE,IAAwE,CAAlF;gDACO,I;;;;;;;;;;;;;;;;;;;;kBA5CU,S","file":"item_group.js","sourcesContent":["import Base from './base.js'\n\nexport default class ItemGroup extends Base {\n  init(...args){\n    super.init(...args);\n    this.relation = {\n      item: {\n        type: think.model.HAS_MANY,\n        key:\"id\",\n        fKey:\"group\",\n        order: \"createAt DESC\",\n        limit:[16],\n        relation: false\n      }\n    };\n  }\n\n  selectData(id)\n  {\n      return this.setRelation(true).where(\"id = \"+id).find();\n  }\n\n  //获取首页显示的列表\n  getList(){\n    return this.setRelation(false).where({isOpen:1}).order(\"createAt DESC\").select();\n  }\n  //显示在首页的拍卖物品信息\n  async getGroupItem(){\n    let groups = [];\n    let itemGroup = await this.getList();\n    for (let i in itemGroup){\n      let g = await  this.selectData(itemGroup[i][\"id\"]);\n      groups.push(g);\n    }\n    return groups;\n  }\n\n  //管理员获取物品列表\n  getListAdmin(){\n    return this.setRelation(false).order(\"createAt DESC\").select();\n  }\n\n  async beforeAdd(data) {\n    data = super.beforeAdd(data);\n    let groups = await this.select();\n    data.no = groups.reduce((pre, curr)=>pre > +curr.no ? pre : +curr.no || pre, 0) + 1;\n    return data;\n  }\n}  "]}